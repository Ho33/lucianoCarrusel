STORE.namespace("STORE.getDataMobile"),STORE.plantillaShowCase=function(){return null},STORE.mobiles=null,STORE.bloque=0;var ultimaPagina=1,mobilesPerPage=2,paginaPorBloque=2;STORE.plantillaShowCase=STORE.mobileWindow,STORE.getDataMobile=function(){STORE.almacenOpciones=[];var e=STORE.Ajax,o={inicio:STORE.bloque+1||1,step:mobilesPerPage*paginaPorBloque},a=JSON.stringify(o),n=new e.CargadorContenidos("/managerMobile",function(){var e=JSON.parse(n.req.responseText);STORE.mobiles=e.datos;var o=[];STORE.createOptionSlider(),STORE.mobiles.forEach(function(e){o.push(JSON.parse(e))}),STORE.mobiles=o,STORE.getModels(),console.log("chasd : ",e.tamano);var a=Math.ceil(e.tamano/mobilesPerPage);STORE.pagination.Init(document.getElementById("pagination"),{size:a,page:ultimaPagina,step:mobilesPerPage,functionClick:STORE.getModels})},a)},STORE.getModels=function(){var e=STORE.getActivePageCarrousel(),o=STORE.getModelSelection(e,STORE.pagination.step),a=Math.floor((e-1)/paginaPorBloque);console.log("bloque Furea: "+STORE.bloque),console.log("bloquesito Furea : "+a),STORE.bloque!==a&&(console.log("bloque : "+STORE.bloque),console.log("bloquesito : "+a),console.log("Cambiamos de bloque"),STORE.bloque=a,ultimaPagina=e,STORE.getDataMobile()),STORE.plantillaShowCase(o)},STORE.getModelSelection=function(e,o){posicionInicial=(e-1)%paginaPorBloque*o,console.log("pagina por bloque: "+paginaPorBloque),console.log("pagina: "+e),console.log("numero de modelos: "+o),console.log("Posicion inicial: "+posicionInicial),console.log("Moviles: "+STORE.mobiles),console.log("Moviles Longitud: "+STORE.mobiles.length),result=[];for(var a=posicionInicial;a<posicionInicial+mobilesPerPage&&a<STORE.mobiles.length;a++)console.log("Mobil en la posicion: "+a+" , "+posicionInicial),result.push(STORE.mobiles[a]);return result},STORE.createShowCase=function(e){var o=$("showCase"),a={id:e.id,class:e.class};o.appendChild(STORE.FactoryTag().div(a))},STORE.mapaFunciones=new Map;var mapaContenedor=new Map;STORE.almacenOpciones=[];var addOption=function(e){STORE.almacenOpciones.push(e)};STORE.createOptionSlider=function(){addOption({id:"Luciano",class:"OptionSlider",title:"Luciano"}),addOption({id:"swiper-container",class:"OptionSlider",title:"Examen"}),addOption({id:"Issam",class:"OptionSlider",title:"Issam"}),STORE.addCarrusel(STORE.Carrusel.createCarrusel,{id:"giran",class:""},"Luciano"),STORE.addCarrusel(STORE.mobileWindow,{id:"mobileWindow",class:""},"Issam"),STORE.addCarrusel(STORE.carruselExamen.Init,{id:"",class:"swiper-container"},"swiper-container");var e=STORE.FactoryTag();$("sliderOptions").innerHTML="";for(var o=0;o<STORE.almacenOpciones.length;o++)$("sliderOptions").appendChild(e.label(STORE.almacenOpciones[o]));var a=$("sliderOptions").children;for(o=0;o<a.length;o++)a[o].addEventListener("click",STORE.manageOptions)},STORE.manageOptions=function(e){$("showCase").innerHTML="",id=e.target.id;var o=STORE.mapaFunciones.get(id);0!==o.contain.length&&(console.log(o.contain),STORE.createShowCase(o.contain)),STORE.plantillaShowCase=o.funcion,STORE.getModels(),STORE.pagination.functionClick=o.functionSpy},STORE.addCarrusel=function(e,o,a){var n={funcion:e,contain:{id:o.id,class:o.class},functionSpy:STORE.getModels||function(){return null}};STORE.mapaFunciones.set(a,n)},STORE.getElemtsCarrusel=function(){console.log(STORE.getModelSelection(STORE.getActivePageCarrousel(),STORE.pagination.step))},STORE.getModelsExam=function(){console.log(STORE.getActivePageCarrousel()),console.log(STORE.pagination.step);var e=STORE.getModelSelection(STORE.getActivePageCarrousel(),STORE.pagination.step);STORE.carruselExamen.Init(e)},STORE.namespace("STORE.sendAuthenticationAjax"),STORE.sendAuthenticationAjax=function(e){var s,t=STORE.Ajax;1==sessionStorage.getItem("bonus")&&STORE.submit.off();var i={user:$("user").value,password:$("password").value},o=JSON.stringify(i);s=new t.CargadorContenidos("/managerLogin",function(){var e=JSON.parse(s.req.responseText);if(e.bonus)STORE.error.set_message(e.message),sessionStorage.setItem("bonus",e.bonus),STORE.error.on(),STORE.submit.on(),STORE.unlocked.off();else if(e.durationLock){STORE.error.on(),STORE.submit.off(),STORE.unlocked.off(),STORE.error.set_message(e.message),$("password").disabled=!0;var o,a=0;o=0<sessionStorage.getItem("chrono")?sessionStorage.getItem("chrono"):e.durationLock;var n=null;n=setInterval(function(){o<=a?(STORE.error.set_message("Pulsa botón para el desbloqueo momentáneo"),STORE.unlocked.on(),clearInterval(n)):(a+=1,sessionStorage.setItem("chrono",o-a),STORE.error.set_message("Estas Bloqueado. Te quedan "+(o-a)+" seconds"))},1e3)}else if(e.ok)"updateDataUser"==sessionStorage.getItem("mainMenuOpcionClient")&&(s=new t.CargadorContenidos("/managerGetDataUser",function(){var e=JSON.parse(s.req.responseText);STORE.viewUpdateDataUser(e)})),"updateDataLogin"==sessionStorage.getItem("mainMenuOpcionClient")&&STORE.viewUpdateLogin(i),"updateImageUser"==sessionStorage.getItem("mainMenuOpcionClient")&&(sessionStorage.setItem("idClient",e.idClient),$("centerPanelPage").innerHTML=STORE.ClientTemplate.formImgUser),"deleteUser"==sessionStorage.getItem("mainMenuOpcionClient")&&(sessionStorage.setItem("confirmCall","deleteUser"),STORE.viewConfirm());else if(e.locked)STORE.error.on(),STORE.submit.off(),STORE.unlocked.on(),$("user").disabled=!0,$("password").disabled=!0,STORE.error.set_message("Mira tu correo, sigue el enlace y pulsa el botón Unlocked");else if(Array.isArray(e)){for(var r=0;r<STORE.nodeListInput.length;r++)$("labelError_"+STORE.nodeListInput[r].id).innerText="Aviso Servidor: ";e.forEach(function(e){$(e.controlName).setAttribute("style","background-color:"+STORE.error.get_errorColor()+" !important"),$("labelError_"+e.controlName).style.display="block",$("labelError_"+e.controlName).innerHTML+=e.messageError+" <br>",STORE.submit.off()})}},o)},STORE.namespace("STORE.sendLoginAjax"),STORE.sendLoginAjax=function(){var s,e=STORE.Ajax,o={user:$("user").value,password:$("password").value};1==sessionStorage.getItem("bonus")&&STORE.submit.off();var a=JSON.stringify(o);s=new e.CargadorContenidos("/managerLogin",function(){var e=JSON.parse(s.req.responseText);if(e.bonus)STORE.error.set_message(e.message),sessionStorage.setItem("bonus",e.bonus),STORE.error.on(),STORE.submit.on(),STORE.unlocked.off();else if(e.durationLock){STORE.error.on(),STORE.submit.off(),STORE.unlocked.off(),STORE.error.set_message(e.message),$("user").disabled=!0,$("password").disabled=!0;var o,a=0;o=0<sessionStorage.getItem("chrono")?sessionStorage.getItem("chrono"):e.durationLock;var n=null;n=setInterval(function(){o<=a?(STORE.error.set_message("Pulsa botón para el desbloqueo momentáneo"),STORE.unlocked.on(),clearInterval(n)):(a+=1,sessionStorage.setItem("chrono",o-a),STORE.error.set_message("Estas Bloqueado. Te quedan "+(o-a)+" seconds"))},1e3)}else if(e.ok)sessionStorage.setItem("user",$("user").value),sessionStorage.setItem("idClient",e.idClient),location.reload();else if(e.locked)STORE.error.on(),STORE.submit.off(),STORE.unlocked.on(),$("user").disabled=!0,$("password").disabled=!0,STORE.error.set_message("Mira tu correo, sigue el enlace y pulsa el botón Unlocked");else if(Array.isArray(e)){for(var r=0;r<STORE.nodeListInput.length;r++)$("labelError_"+STORE.nodeListInput[r].id).innerText="Aviso Servidor: ";e.forEach(function(e){$(e.controlName).setAttribute("style","background-color:"+STORE.error.get_errorColor()+" !important"),$("labelError_"+e.controlName).style.display="block",$("labelError_"+e.controlName).innerHTML+=e.messageError+" <br>",STORE.submit.off()})}},a)},STORE.namespace("STORE.sendPersonalDataAjax"),STORE.sendPersonalDataAjax=function(){var a,e=STORE.Ajax,o={nif:$("dni").value,lastName:$("lastname").value,firstName:$("firstname").value,adress:$("adress").value,cp:$("cp").value,birthday:$("birthday").value,email:$("email").value,landline:$("select_landline").value+$("landline").value,mobile:$("select_mobile").value+$("mobile").value,user:$("user").value,password:$("password").value},n=JSON.stringify(o);a=new e.CargadorContenidos("/managerSignUp",function(){if(-1!==a.req.responseText.indexOf("ok"))alert("usuario registrado"),location.reload();else{for(var e=JSON.parse(a.req.responseText),o=0;o<STORE.nodeListInput.length;o++)$("labelError_"+STORE.nodeListInput[o].id).innerText="Aviso Servidor: ";e.forEach(function(e){$(e.controlName).setAttribute("style","background-color:"+STORE.error.get_errorColor()+" !important"),$("labelError_"+e.controlName).style.display="block",$("labelError_"+e.controlName).innerHTML+=e.messageError+" <br>",STORE.submit.off()})}},n)},STORE.namespace("STORE.sendUnlockedAjax"),STORE.sendUnlockedAjax=function(){var o,e=STORE.Ajax;o=new e.CargadorContenidos("/unlockedLogin",function(){var e=JSON.parse(o.req.responseText);e.unlocked&&(sessionStorage.setItem("chrono",0),STORE.error.set_message(e.message),STORE.error.on(),STORE.submit.on(),STORE.unlocked.off(),$("user").disabled=!1,$("password").disabled=!1)})},STORE.namespace("STORE.sendUpdateLoginAjax"),STORE.sendUpdateLoginAjax=function(){var a,e=STORE.Ajax;if($("password").value==$("passwordConfirm").value){var o={user:$("user").value,password:$("password").value};1==sessionStorage.getItem("bonus")&&STORE.submit.off();var n=JSON.stringify(o);a=new e.CargadorContenidos("/managerUpdateLogin",function(){if(-1!==a.req.responseText.indexOf("ok")){alert("Validado,verificado y Update Login en BBDD"),sessionStorage.setItem("user",$("user").value),$("centerPanelPage").innerHTML="",(new STORE.FactoryMainContainer).getCenterPanelPagePagination()}else{for(var e=JSON.parse(a.req.responseText),o=0;o<STORE.nodeListInput.length;o++)$("labelError_"+STORE.nodeListInput[o].id).innerText="Aviso Servidor: ";e.forEach(function(e){$(e.controlName).setAttribute("style","background-color:"+STORE.error.get_errorColor()+" !important"),$("labelError_"+e.controlName).style.display="block",$("labelError_"+e.controlName).innerHTML+=e.messageError+" <br>",STORE.submit.off()})}},n)}else STORE.error.on(),STORE.submit.off(),STORE.error.set_message("No coincide la clave")},STORE.namespace("STORE.sendUpdatePersonalDataAjax"),STORE.sendUpdatePersonalDataAjax=function(){var a,e=STORE.Ajax,o={nif:$("dni").value,lastName:$("lastname").value,firstName:$("firstname").value,adress:$("adress").value,cp:$("cp").value,birthday:$("birthday").value,email:$("email").value,landline:$("select_landline").value+$("landline").value,mobile:$("select_mobile").value+$("mobile").value},n=JSON.stringify(o);a=new e.CargadorContenidos("/managerUpdateDataUser",function(){if(-1!==a.req.responseText.indexOf("ok")){alert("Validado,verificado y Update en BBDD"),$("centerPanelPage").innerHTML="",(new STORE.FactoryMainContainer).getCenterPanelPagePagination()}else{for(var e=JSON.parse(a.req.responseText),o=0;o<STORE.nodeListInput.length;o++)$("labelError_"+STORE.nodeListInput[o].id).innerText="Aviso Servidor: ";e.forEach(function(e){$(e.controlName).setAttribute("style","background-color:"+STORE.error.get_errorColor()+" !important"),$("labelError_"+e.controlName).style.display="block",$("labelError_"+e.controlName).innerHTML+=e.messageError+" <br>",STORE.submit.off()})}},n)};